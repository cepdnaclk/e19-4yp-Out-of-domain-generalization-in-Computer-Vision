# experiments/melanoma_dg.yaml
# Melanoma Domain Generalization Experiment (Camelyon17 centers 0,1,2 -> 3 -> 4)

task:
  task_name: "Tumor Detection"
  image_modality: "histopathology image patches extracted from H&E-stained whole-slide image of lymph node sections"
  positive_class: "Tumor Tissue"
  negative_class: "Normal Tissue"
  role: "Expert Pathologist"
  concepts: null # Set to null to trigger LLM Concept Discovery

dataset:
  adapter: "camelyon17"
  root: "/storage/projects3/e19-fyp-out-of-domain-gen-in-cv/camelyon17WILDS/"
  name: "camelyon17_dg"
  class_names: ["Normal", "Tumor"]
  cache_dir: "/storage/projects3/e19-fyp-out-of-domain-gen-in-cv/cache/"
  few_shot: true
  few_shot_no: 5
  # Camelyon17 specific params (matching our adapter's __init__)
  train_centers: [0, 1, 2]
  val_centers: [3]
  test_centers: [4]

evolution:
  generations: 10
  island_capacity: 100
  target_metric: "f1_macro"
  initial_pop_size: 20
  num_parents: 10
  offspring_per_gen: 10

llm:
  provider: "gemini"
  model_name: "gemma-3-27b-it"
  temperature: 1.0

execution:
  orchestrator_io_workers: 10
  dataloader_cpu_workers: 12
  device: "cuda" # or "cpu"
  batch_size: 512
