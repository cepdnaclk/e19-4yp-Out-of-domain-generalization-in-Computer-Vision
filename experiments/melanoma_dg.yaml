# experiments/melanoma_dg.yaml
# Melanoma Domain Generalization Experiment (Camelyon17 centers 0,1,2 -> 3 -> 4)

task:
  task_name: "Tumor Detection"
  image_modality: "Histopathology Patches"
  positive_class: "Tumor Tissue"
  negative_class: "Normal Tissue"
  role: "Expert Pathologist"
  concepts: null # Set to null to trigger LLM Concept Discovery

dataset:
  adapter: "camelyon17"
  root: "/storage/projects3/e19-fyp-out-of-domain-gen-in-cv/camelyon17WILDS/"
  name: "camelyon17_dg"
  class_names: ["Normal", "Tumor"]
  cache_dir: "/storage/projects3/e19-fyp-out-of-domain-gen-in-cv/cache/"
  few_shot: true
  few_shot_no: 5
  # Camelyon17 specific params (matching our adapter's __init__)
  train_centers: [0, 1, 2]
  val_centers: [3]
  test_centers: [4]

evolution:
  generations: 5
  island_capacity: 20
  target_metric: "f1_macro"
  initial_pop_size: 10
  num_parents: 5
  offspring_per_gen: 5

llm:
  provider: "google"
  model_name: "gemma3-37b-it"

execution:
  max_workers: 8
  device: "cuda" # or "cpu"
  batch_size: 256
